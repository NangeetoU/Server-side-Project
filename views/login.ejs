<%- include('partials/header') %>

<div class="page-wrapper">
    <div class="login-card">
        <div class="row align-items-center">

            <div class="col-lg-7">
                <div class="login-form-container">
                    <h1 class="dodash-title">DoDash</h1>
                    <h2 class="sign-in-title">Sign in</h2>
                    <div class="alert alert-success d-none" id="register-success-alert" role="alert">
    ✅ Registration successful! Please sign in.
</div>
                    <form action="/login" method="POST">
                        <div class="input-group mb-3">
                            <span class="input-group-text"><i class="fas fa-user"></i></span>
                            <input type="text" class="form-control" placeholder="Enter Username" name="username" required>
                        </div>
                        <div class="input-group mb-4">
                            <span class="input-group-text"><i class="fas fa-lock"></i></span>
                            <input type="password" class="form-control" placeholder="Enter Password" name="password" required>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="rememberCheck">
                                <label class="form-check-label" for="rememberCheck">
                                    Remember Me
                                </label>
                            </div>
                        </div>
                        <% if (typeof error !== 'undefined' && error) { %>
                <div class="alert alert-danger mt-3" role="alert">
                    <%= error %>
                </div>
            <% } %>
                        <button type="submit" class="btn btn-warning w-100 fw-bold">Login</button>
                    </form>
                    
                    <p class="mt-4 text-center create-account-text">
                        Don't have an account? <a href="/register" class="text-warning">Create One</a>
                    </p>
                </div>
            </div>

            <div class="col-lg-5 d-none d-lg-block text-center p-0">
                <img src="/images/login-illustration.png" class="img-fluid login-image" alt="Login Illustration">
            </div>

        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // สร้าง object เพื่ออ่านค่าจาก Query Parameter ใน URL
        const params = new URLSearchParams(window.location.search);

        // เช็คว่ามี parameter ที่ชื่อ 'registered' และมีค่าเป็น 'success' หรือไม่
        if (params.get('registered') === 'success') {
            // ถ้าใช่, ให้หา Alert ของเราแล้วเอา class 'd-none' ออกเพื่อให้มันแสดงผล
            const successAlert = document.getElementById('register-success-alert');
            if (successAlert) {
                successAlert.classList.remove('d-none');
            }
        }
    });
</script>

<%- include('partials/footer') %>

